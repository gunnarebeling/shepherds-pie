<div class="container mt-5" data-controller="addpizza">
    <h1>Create a New Order</h1>
    <%= form_with(model: @order, local: true, html: { class: 'needs-validation', novalidate: true }) do |form| %>
        <div class="form-group">
            <%= form.label :delivery_employee_id, "Delivery Employee", class: "form-label" %>
            <%= form.collection_select :delivery_employee_id, Employee.all, :id, :name, { include_blank: true }, { class: "form-control" } %>
        </div>

        <h2>Pizzas</h2>
        <div id="pizzas"  data-addpizza-target="pizzas">
            <%= form.fields_for :pizzas do |pizza_form| %>
                <div class="pizza-fields">
                    <%= render 'pizza_fields', f: pizza_form %>
                </div>
            <% end %>
            <div class="form-group mt-3">
                <%= link_to 'Add Pizza', '#', id: 'add_pizza', class: 'btn btn-secondary', data: {action: 'addpizza#showModal'}%>
            </div> 
        </div>

        <div class="form-group mt-3 text-center">
            <%= form.submit 'Create Order', class: 'btn btn-primary' %>
        </div>
    <% end %>
    <%= render 'shared/pizza_modal' %>
</div>


